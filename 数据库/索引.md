

[TOC]

# 索引

## 原理

- 基于B+树，叶子节点存储数据，每个树节点大小固定大小。B树和树红黑数的区别在于B+树只有叶子节点会存储数据。

  

## 聚集索引和非聚集索引

  - 聚集索引就是主键索引，节点保存了整行数据，非聚集索引保存主键和索引列数据，所以需要回表查询
  - 非聚集索引存储指针的好处就是不用再维护指针。因为行会移动、数据页会分裂

## 索引失效

  - 范围查询in、between、<>
  - 模糊查询

## 使用索引的优缺点

好处：
	1，提高表数据的检索效率；
	2，如果排序的列是索引列(如果查询的列==排序的列[并且在这列上做了索引])，大大降低排序成本；
	3，在分组操作中如果分组条件是索引列，也会提高效率；

缺点：
      索引需要额外的维护成本；因为索引文件是单独存在的文件,对数据的增加,修改,删除,都会产生额外的对索引文件的操作,这些操作需要消耗额外的IO,会降低增/改/删的执行效率;

## 索引如何对字符比较大小

 `utf8_unicode_ci`，用来排序的规则 

```
`field1` text COLLATE utf8_unicode_ci NOT NULL COMMENT '字段1'
```

