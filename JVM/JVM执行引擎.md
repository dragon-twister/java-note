# 执行引擎（Execution Engine）

![](../image/jit.png)  

执行引擎主要用来执行Java生成.class的字节码，解析成各种cpu所能执行的二进制指令。。

## 解释执行和编译执行


解释执行：将字节码一行一行地翻译为机器码执行。执行起来会比较慢

编译执行：将字节码一次性翻译为机器码后执行。编译慢，执行快 


## 即时（Just-In-Time)编译器：

即时编译器被引入用来弥补解释执行的缺点。

它把热点代码编译成机器语言，编译慢，执行快。

通过这种方法（JIT），Hotspot 虚拟机将权衡下面两种时间消耗：将字节码编译成本地代码需要的额外时间和解释执行字节码消耗更多的时间。

在运行一段时间后，热点代码被编译为机器码，提高运行效率。



**为什么 jvm 不编译为机器码**

为了快速启动

确实有编译再运行的 jvm

**为什么 javac 不编译为机器码**

为了激进优化，用运行时候的结果优化编译/执行

为了 .class 跨平台可运行

确实有直接编译成机器码的 java 编译器
 

**java对比c++为什么更慢？**

字节码加载、编译执行，垃圾回收

**Java即时编译与C/C++编译对比**

Java的劣势：

JIT即时编译器运行占用用户运行时间

Java可以在运行时加载新的类，编译器需要时刻注意类型变化并在运行时撤销或重新进行一些优化

Java对象在堆上分配，垃圾回收比C/C++语言由用户管理开销大

Java的优势：

C/C++编译器属于静态优化，不能在运行期间进行优化。如：调用频率预测、分支频率预测
