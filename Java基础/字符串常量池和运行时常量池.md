## 字符串常量池

**为什么在堆中？**

因为永久代的回收效率很低，在full gc的时候才会触发。
而full gc是老年代的空间不足、永久代不足时才会触发。

**string.intern()？**

一个初始为空的字符串池，它由类String独自维护。
当调用 intern方法时，如果常量池已经包含一个等于此String对象的字符串（用equals(oject)方法确定），则返回池中的字符串。
否则，将此String对象添加到池中，并返回此String对象的引用。

所以就如intern方法注释，intern可能返回字符串也可能返回引用。

**为什么需要string.intern()**

减少重复字符串的内存消耗,以垃圾回收的形式做到的

## 运行时常量池

class文件中有一个常量池，存储字面量和符号引用。
这部分内容加载到内存中后，由运行时常量池存放。
运行时常量池是类中的常量池加载到内存中的版本。

不同的是，在类加载的解析阶段，会把符号引用替换为直接引用，解析的过程会去查询字符串常量池，以保证运行时常量池所引用的字符串与字符串常量池中是一致的。

**什么是字面量？**
基本类型、字符串类型、null类型的值

**为什么在元空间中？**
元空间不在虚拟机内存中，不受虚拟机内存限制，减少在本地内存中，

## 它们有什么区别？

运行时常量池，每个类都有。

字符串常量池是全局共享。